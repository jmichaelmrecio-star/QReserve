<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contact Us - Tito Renz Resort</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header>
      <nav>
        <a href="index.html" class="nav-logo" aria-label="Tito Renz Resort">
          <img src="images/logo.png" alt="Tito Renz Resort Logo" />
        </a>
        <ul>
          <li><a href="index.html">Home</a></li>

          <li><a href="help.html">Help</a></li>
        </ul>
        <div class="nav-right" id="navRight"></div>
      </nav>
    </header>

    <main class="container page-content has-fixed-header-offset">
      <!-- Page Hero Section -->
      <section class="page-hero-section" style="margin-bottom: 1.5rem">
        <div class="hero-content">
          <br /><br />
          <h1>Get in Touch</h1>
          <p>We'd love to hear from you</p>
        </div>
      </section>

      <div
        style="
          display: grid;
          grid-template-columns: 0.8fr 1.2fr;
          gap: 1rem;
          max-width: 1200px;
          margin: 0 auto;
        "
      >
        <!-- Contact Information -->
        <div class="contact-info-section">
          <h2>Get in Touch</h2>

          <div
            class="contact-info-card"
            style="padding: 1rem; background: #f8f9fa; border-radius: 8px"
          >
            <h3 style="margin-top: 0; color: var(--primary-color)">
              üìç Location
            </h3>
            <p>Sitio Bulalo, Norzagaray, Philippines</p>
          </div>

          <div
            class="contact-info-card"
            style="padding: 1rem; background: #f8f9fa; border-radius: 8px"
          >
            <h3 style="margin-top: 0; color: var(--primary-color)">üìû Phone</h3>
            <p>
              <a href="tel:09772468920">0977 246 8920</a><br />
              <a href="tel:09166403411">0916 640 3411</a>
            </p>
          </div>

          <div
            class="contact-info-card"
            style="padding: 1rem; background: #f8f9fa; border-radius: 8px"
          >
            <h3 style="margin-top: 0; color: var(--primary-color)">üìß Email</h3>
            <p>
              <a href="mailto:titorenznorzagaray@gmail.com"
                >titorenznorzagaray@gmail.com</a
              >
            </p>
          </div>

          <div
            class="contact-info-card"
            style="padding: 1rem; background: #f8f9fa; border-radius: 8px"
          >
            <h3 style="margin-top: 0; color: var(--primary-color)">
              ‚è∞ Response Time
            </h3>
            <p>We typically respond within 24 hours during business days.</p>
          </div>

          <!-- Alternative Contact Method -->
          <div
            style="padding: 1.5rem; background: #f8f9fa00; border-radius: 8px"
          >
            <h3 style="margin-bottom: 1rem; color: var(--primary-color)">
              Prefer to reach out directly?
            </h3>
            <p style="font-size: 0.95rem">You can also:</p>
            <ul style="list-style: none; padding: 0; margin: 0">
              <li style="margin-bottom: 0.5rem">
                <a
                  href="mailto:titorenznorzagaray@gmail.com"
                  class="button-secondary"
                  style="display: block; padding: 0.5rem; text-align: center"
                  >üìß Send Email</a
                >
              </li>
              <li style="margin-bottom: 0.5rem">
                <a
                  href="tel:09772468920"
                  class="button-secondary"
                  style="display: block; padding: 0.5rem; text-align: center"
                  >üìû Call Us</a
                >
              </li>
              <li>
                <a
                  href="help.html"
                  class="button-secondary"
                  style="display: block; padding: 0.5rem; text-align: center"
                  >‚ùì Visit Help Center</a
                >
              </li>
            </ul>
          </div>
        </div>

        <!-- Contact Form -->
        <div class="contact-form-section">
          <h2 style="margin-bottom: 1.5rem">Send us a Message</h2>

          <form id="contactForm" class="contact-form">
            <div class="form-group">
              <label for="contactName">Full Name *</label>
              <input
                type="text"
                id="contactName"
                name="name"
                required
                placeholder="Your full name"
              />
            </div>

            <div class="form-group">
              <label for="contactEmail">Email Address *</label>
              <input
                type="email"
                id="contactEmail"
                name="email"
                required
                placeholder="your.email@example.com"
              />
            </div>

            <div class="form-group">
              <label for="contactPhone">Phone Number (Optional)</label>
              <input
                type="tel"
                id="contactPhone"
                name="phone"
                placeholder="Your contact number"
              />
            </div>

            <div class="form-group">
              <label for="contactSubject">Subject *</label>
              <select id="contactSubject" name="subject" required>
                <option value="">-- Select a subject --</option>
                <option value="reservation">Reservation Inquiry</option>
                <option value="booking_issue">Booking Issue</option>
                <option value="feedback">Feedback or Suggestion</option>
                <option value="partnership">Partnership Opportunity</option>
                <option value="complaint">General Complaint</option>
                <option value="other">Other</option>
              </select>
            </div>

            <div class="form-group">
              <label for="contactMessage">Message *</label>
              <textarea
                id="contactMessage"
                name="message"
                rows="6"
                required
                placeholder="Please tell us more about your inquiry..."
              ></textarea>
            </div>

            <!-- Spam Prevention -->
            <div
              style="
                display: flex;
                align-items: center;
                gap: 8px;
                margin-top: 15px;
              "
            >
              <input
                type="checkbox"
                id="notSpamCheck"
                name="notSpam"
                required
                style="width: auto"
              />
              <label
                for="notSpamCheck"
                style="font-weight: bold; margin-bottom: 0.6rem"
                >I'm not a robot and I understand my message will be
                reviewed</label
              >
            </div>

            <button
              type="submit"
              class="button-primary"
              style="width: 100%; padding: 0.75rem"
            >
              Send Message
            </button>
          </form>

          <p
            style="
              font-size: 0.9rem;
              color: #999;
              margin-top: 0.2rem;
              margin-bottom: 2.5rem;
              text-align: center;
            "
          >
            * Required fields
          </p>
        </div>
      </div>
    </main>

    <footer>
      <div class="footer-content">
        <div class="footer-section contact-info">
          <h3>Tito Renz Resort</h3>
          <p>Your seamless booking experience starts here.</p>
          <p>üìç Norzagaray, Bulacan, Philippines</p>
          <p>üìû 0977 246 8920 or 0916 640 3411</p>
          <p>üìß titorenznorzagaray@gmail.com</p>
        </div>

        <div class="footer-section quick-links">
          <h3>Quick Links</h3>
          <ul>
            <!-- Dynamically populated by renderFooterQuickLinks() -->
          </ul>
        </div>

        <div class="footer-section about-contact">
          <h3>About & Contact</h3>
          <ul>
            <li><a href="about.html">Our Story</a></li>
            <li><a href="contact.html">Send Us a Message</a></li>
            <li><a href="help.html">Help / Guides</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 QReserve Project - All Rights Reserved.</p>
      </div>
    </footer>

    <script src="notifications.js"></script>
    <script src="ui-core.js"></script>
    <script src="auth-profile.js"></script>
    <script src="reservation.js"></script>

    <script>
      // Initialize page and set up form handler
      document.addEventListener("DOMContentLoaded", function () {
        // Render navigation and footer
        if (typeof renderNavigationLinks === "function") {
          renderNavigationLinks();
        }
        if (typeof renderFooterQuickLinks === "function") {
          renderFooterQuickLinks();
        }

        // Handle contact form submission
        const contactForm = document.getElementById("contactForm");
        if (contactForm) {
          contactForm.addEventListener("submit", handleContactFormSubmit);
        }
      });

      // Handle contact form submission
      async function handleContactFormSubmit(event) {
        event.preventDefault();

        // Get form data
        const name = document.getElementById("contactName").value.trim();
        const email = document.getElementById("contactEmail").value.trim();
        const phone = document.getElementById("contactPhone").value.trim();
        const subject = document.getElementById("contactSubject").value;
        const message = document.getElementById("contactMessage").value.trim();
        const notSpamCheck = document.getElementById("notSpamCheck").checked;

        // Validate form
        if (!name || !email || !subject || !message) {
          showToast("Please fill in all required fields", "warning");
          return;
        }

        if (!notSpamCheck) {
          showToast("Please confirm you are not a robot", "warning");
          return;
        }

        // Validate email format
        if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
          showToast("Please enter a valid email address", "warning");
          return;
        }

        // Show loading state
        const submitBtn = event.target.querySelector('button[type="submit"]');
        const originalText = submitBtn.textContent;
        submitBtn.disabled = true;
        submitBtn.textContent = "Sending...";

        try {
          // Send contact form data to backend
          const response = await fetch(
            "http://localhost:3000/api/contact/send-message",
            {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({
                name,
                email,
                phone,
                subject,
                message,
              }),
            },
          );

          const data = await response.json();

          if (response.ok) {
            // Success
            showToast(
              "Message sent successfully! We will get back to you soon.",
              "success",
            );
            contactForm.reset();

            // Scroll to success message
            window.scrollTo({ top: 0, behavior: "smooth" });
          } else {
            // Server error
            showToast(
              data.message || "Failed to send message. Please try again.",
              "error",
            );
          }
        } catch (error) {
          console.error("Contact form submission error:", error);

          // Fallback: Send via mailto if API fails
          const mailtoLink = `mailto:titorenznorzagaray@gmail.com?subject=${encodeURIComponent(`Contact Form: ${subject}`)}&body=${encodeURIComponent(`Name: ${name}\nEmail: ${email}\nPhone: ${phone}\n\nMessage:\n${message}`)}`;
          window.location.href = mailtoLink;

          showToast(
            "Opening email client. Please send your message directly.",
            "info",
          );
        } finally {
          // Restore button state
          submitBtn.disabled = false;
          submitBtn.textContent = originalText;
        }
      }
    </script>
  </body>
</html>
