<!-- Shared Admin Actions Component (Navigation/Tabs) -->
<!-- This component is shared across all admin dashboard pages -->

<div class="d-flex justify-content-between align-items-center mb-3">
    <div>
        <!-- Role Badge Display -->
        <span id="roleBadge" class="badge rounded-pill mb-2" style="font-size: 0.85rem;">
            <span id="roleText">Loading...</span>
        </span>
        
        <!-- Manager Info Box - Only visible to managers -->
        <div id="managerInfoBox" class="alert alert-info d-none mb-2" role="alert">
            <strong>‚ÑπÔ∏è Manager Access:</strong> You can manage daily operations (Schedule, Reservations, Check-in). 
            For user management, service configuration, or promo codes, contact an Administrator.
        </div>
    </div>
    
    <!-- Admin Profile/Logout Dropdown -->
    <div class="dropdown">
        <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="adminProfileDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            <span class="me-1">üë§</span>
            <span id="adminUserName">Admin</span>
        </button>
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="adminProfileDropdown">
            <li><a class="dropdown-item" href="#" onclick="if(typeof openAdminProfileModal === 'function') { openAdminProfileModal(); } else { console.error('openAdminProfileModal not available'); } return false;"><i class="bi bi-person"></i> Edit Profile</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item text-danger" href="#" onclick="logout(); return false;"><i class="bi bi-box-arrow-right"></i> Logout</a></li>
        </ul>
    </div>
</div>

<div class="admin-tabs mb-3">
    <div class="d-flex flex-wrap gap-2" role="tablist" aria-label="Admin Sections">
        <button class="btn btn-sm tab-button active" data-target="schedule-management" role="tab" aria-selected="true">Schedule</button>
        <button class="btn btn-sm tab-button" onclick="window.location.href='promotions.html'">Promotions</button>
        <button class="btn btn-sm tab-button" onclick="window.location.href='dining.html'">Dining</button>
        <button class="btn btn-sm tab-button" onclick="window.location.href='checkin-demo.html'">Checkin Demo</button>
        <button class="btn btn-sm tab-button admin-only" data-target="nav-promocodes" role="tab" aria-selected="false" style="display: none;">Promo Codes</button>
        <button class="btn btn-sm tab-button admin-only" data-target="user-management" role="tab" aria-selected="false" style="display: none;">Users</button>
        <button class="btn btn-sm tab-button admin-only" data-target="service-management" role="tab" aria-selected="false" style="display: none;">Services</button>
        <button class="btn btn-sm tab-button" data-target="dashboard-area" role="tab" aria-selected="false">Reservations</button>
        <button class="btn btn-sm tab-button customer-view-tab" data-target="customer-view-section" role="tab" aria-selected="false" style="display: none;">My Reservations</button>
        <a class="btn btn-sm tab-button" href="checkin.html">QR Check-in</a>
    </div>
</div>

<script>
// Initialize role-based UI visibility when component loads
if (typeof initializeRoleBasedUI === 'function') {
    initializeRoleBasedUI();
}

// Update admin user name in dropdown
(function updateAdminUserName() {
    const userNameEl = document.getElementById('adminUserName');
    if (userNameEl && typeof getLoggedInUser === 'function') {
        const user = getLoggedInUser();
        if (user) {
            const fullName = user.full_name || `${user.first_name || ''} ${user.last_name || ''}`.trim() || user.email || 'Admin';
            userNameEl.textContent = fullName.length > 20 ? fullName.substring(0, 20) + '...' : fullName;
        }
    }
})();
</script>

<script>
// Initialize role-based UI visibility when component loads
if (typeof initializeRoleBasedUI === 'function') {
    initializeRoleBasedUI();
}
</script>